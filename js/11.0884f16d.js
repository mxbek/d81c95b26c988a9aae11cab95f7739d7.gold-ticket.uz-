"use strict";(self["webpackChunkgolden_ticket"]=self["webpackChunkgolden_ticket"]||[]).push([[11],{8011:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"container"}},[t("div",{attrs:{id:"settings"}},[t("div",{staticClass:"user-pic"},[t("img",{attrs:{src:e.$store.state.photo?e.$store.state.photo:"https://gold-ticket.uz/tgs/avatar.png",alt:e.$store.state.name}})]),t("form",{staticClass:"settings-form",attrs:{action:""}},[t("div",{staticClass:"form-control"},["ru"===e.$store.state.lang?t("label",{staticClass:"form-label",attrs:{for:"name"}},[e._v("Имя")]):t("label",{staticClass:"form-label",attrs:{for:"name"}},[e._v("Isim")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-input",attrs:{id:"name",name:"name",type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),t("div",{staticClass:"form-control"},["ru"===e.$store.state.lang?t("label",{staticClass:"form-label",attrs:{for:"phone"}},[e._v("Телефон")]):t("label",{staticClass:"form-label",attrs:{for:"phone"}},[e._v("Telefon")]),t("input",{directives:[{name:"mask",rawName:"v-mask",value:"+998 (##) ###-##-##",expression:"'+998 (##) ###-##-##'"},{name:"model",rawName:"v-model",value:e.phone,expression:"phone"}],staticClass:"form-input",attrs:{id:"phone",name:"phone",disabled:!!e.$store.state.phone,type:"text"},domProps:{value:e.phone},on:{input:function(t){t.target.composing||(e.phone=t.target.value)}}})])])])])},o=[],n=a(6265),r=a.n(n),i=a(1120),p={name:"Settings",data:()=>({name:"",phone:""}),components:{},async mounted(){this.name=this.$store.state.name,this.phone=this.$store.state.phone,Telegram.WebApp.BackButton.show(),Telegram.WebApp.BackButton.onClick((()=>{Telegram.WebApp.MainButton.hide(),this.$router.push("/profile")})),Telegram.WebApp.MainButton.show(),"ru"===this.$store.state.lang?Telegram.WebApp.MainButton.setParams({text:"Сохранить",color:"#f2c058",text_color:"#FFF"}):Telegram.WebApp.MainButton.setParams({text:"Saqlash",color:"#f2c058",text_color:"#FFF"}),Telegram.WebApp.MainButton.onClick((async()=>{Telegram.WebApp.MainButton.showProgress(),await r().post(`https://server.gold-ticket.uz/api/user/${Telegram.WebApp.initDataUnsafe.user.id}`,{name:this.name,phone:this.phone}).then((e=>{Telegram.WebApp.MainButton.hideProgress(),"ru"===this.$store.state.lang?Telegram.WebApp.showPopup({title:"Успешно",message:"Ваши данные успешно сохранены",buttons:[{id:"success",type:"ok",text:"Ок"}]}):Telegram.WebApp.showPopup({title:"Muvofaqiyatli!",message:"Sizning malumotlaringiz muvofatqiyatli saqlandi",buttons:[{id:"success",type:"ok",text:"Ok"}]}),this.$store.commit("updateUser",{name:e.data.data.name,phone:e.data.data.phone}),Telegram.WebApp.HapticFeedback.notificationOccurred("success"),Telegram.WebApp.MainButton.hide(),i.Z.push("/")})).catch((e=>{Telegram.WebApp.HapticFeedback.notificationOccurred("error"),Telegram.WebApp.showPopup(data),Telegram.WebApp.MainButton.hide(),i.Z.push("/")}))}))}},l=p,m=a(1001),u=(0,m.Z)(l,s,o,!1,null,"67fdfa78",null),c=u.exports}}]);
//# sourceMappingURL=11.0884f16d.js.map